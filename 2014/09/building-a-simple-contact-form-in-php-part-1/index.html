<!DOCTYPE html>
<html lang="en">
<head>
    <title>
                                    Building a simple contact form in PHP - Part 1 | The Dev Files
                        </title>
    <meta charset="utf-8">
    <meta name="theme-color" content="#ffffff">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
                            <meta name="description" content="Building a simple contact form in PHP">
                            <meta name="author" content="Jonathan Bernardi">
            
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://www.thedevfiles.com/2014/09/building-a-simple-contact-form-in-php-part-1/">
                <link rel="next" href="https://www.thedevfiles.com/2014/09/building-a-simple-contact-form-in-php-part-2/">
                    <link rel="last" href="https://www.thedevfiles.com/2014/09/building-a-simple-contact-form-in-php-part-5/">
        <link rel="author" href="/contact/">
    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.min.js"></script>
    <![endif]-->
    <link href="/assets/css/style.css" rel="stylesheet" type="text/css"/>
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css" rel="stylesheet"
          type="text/css"/>

    <link rel="apple-touch-startup-image" href="/assets/images/favicon/2048x2048.png">
<meta name="mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-capable" content="yes">
<link rel="shortcut icon" sizes="76x76" href="/assets/images/favicon/76x76.png">
<link rel="shortcut icon" sizes="120x120" href="/assets/images/favicon/120x120.png">
<link rel="shortcut icon" sizes="128x128" href="/assets/images/favicon/128x128.png">
<link rel="shortcut icon" sizes="152x152" href="/assets/images/favicon/152x152.png">
<link rel="shortcut icon" sizes="196x196" href="/assets/images/favicon/196x196.png">
<link rel="shortcut icon" sizes="512x512" href="/assets/images/favicon/512x512.png">
<link rel="shortcut icon" sizes="1024x1024" href="/assets/images/favicon/1024x1024.png">
<link rel="shortcut icon" sizes="2048x2048" href="/assets/images/favicon/2048x2048.png">
<link rel="apple-touch-icon" sizes="76x76" href="/assets/images/favicon/76x76.png">
<link rel="apple-touch-icon" sizes="120x120" href="/assets/images/favicon/120x120.png">
<link rel="apple-touch-icon" sizes="128x128" href="/assets/images/favicon/128x128.png">
<link rel="apple-touch-icon" sizes="152x152" href="/assets/images/favicon/152x152.png">
<link rel="apple-touch-icon" sizes="196x196" href="/assets/images/favicon/196x196.png">
<link rel="apple-touch-icon" sizes="512x512" href="/assets/images/favicon/512x512.png">
<link rel="apple-touch-icon" sizes="1024x1024" href="/assets/images/favicon/1024x1024.png">
<link rel="apple-touch-icon" sizes="2048x2048" href="/assets/images/favicon/2048x2048.png">

    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.9.1/styles/solarized_dark.min.css">
    <link rel="alternate" type="application/atom+xml" href="/atom.xml"
          title="The Dev Files activity feed"/>
                </head>
<body itemscope="http://schema.org/Blog">
<header class="siteheader">
    <div class="content-wrapper">
        <h2 class="siteheader__title"><a href="/">The Dev Files</a></h2>
        <small class="siteheader__subtitle">Development Blog of Jonathan Bernardi</small>
    </div>
</header>
<div class="menu menu--main">
    <div class="content-wrapper">
        <nav class="menu__nav" role="navigation">
    <ul class="menu__links">
        <li class="menu__item">
            <a class="menu__link" href="/">Blog</a>
        </li>
        <li class="menu__item">
            <a class="menu__link" href="/archive/">Archive</a>
        </li>
        <li class="menu__item">
            <a class="menu__link" href="/contact/">Contact</a>
        </li>
        <li class="menu__item menu__item--rss">
            <a class="menu__link" href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">
                <i class="fa fa-rss"></i>
                <span class="sr-only">RSS</span>
            </a>
        </li>
    </ul>
</nav>
        <div class="menu__right">
            <form class="search" action="https://www.google.com/search" method="get" role="search">
    <input type="hidden" name="q" value="site:www.thedevfiles.com">
    <input class="search__input" type="search" name="q" results="0" placeholder="Search">
</form>
        </div>
    </div>
</div>

<div class="content-wrapper">
    <section class="main">

            <article class="post h-entry" itemid="https://www.thedevfiles.com/2014/09/building-a-simple-contact-form-in-php-part-1/" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
        <header class="post__header">
            <h1 class="post__title p-name" itemprop="headline">Building a simple contact form in PHP - Part 1</h1>

            <h2 class="post__date">Sep 1st, 2014</h2>
                            <meta class="u-photo" itemprop="image" content="https://www.thedevfiles.com/images/featured/contact-form.png">
                    </header>
        <div class="post__body e-content" itemprop="articleBody">
            <p>In this series we will be building a simple contact form in php.</p>

<p>It will cover sending emails and form validation.</p>

<!--more-->

<h2 id="creating-the-contact-form">Creating the Contact Form</h2>

<p>We will start with the form itself.</p>

<p>Save the following as contact.php</p>

<pre><code class="html">&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;meta charset="utf-8"&gt;
    &lt;meta http-equiv="X-UA-Compatible" content="IE=edge"&gt;
    &lt;title&gt;Contact Us&lt;/title&gt;
    &lt;link rel="stylesheet" href="styles.css"&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;form action="contact.php" method="post" accept-charset="utf-8"&gt;
     &lt;fieldset&gt;
         &lt;legend&gt;Contact Us&lt;/legend&gt;
         &lt;div class="row"&gt;
             &lt;label for="name"&gt;Name: &lt;/label&gt;
             &lt;input id="name" type="text" name="name" value=""&gt;
         &lt;/div&gt;
         &lt;div class="row"&gt;
             &lt;label for="email"&gt;Email Address: &lt;/label&gt;
             &lt;input id="email" type="text" name="email" value=""&gt;
         &lt;/div&gt;
         &lt;div class="row"&gt;
             &lt;label for="message"&gt;Message:&lt;/label&gt;
             &lt;textarea id="message" name="message"&gt;&lt;/textarea&gt;
         &lt;/div&gt;
         &lt;div class="row"&gt;
             &lt;input type="submit" value="Submit"&gt;
         &lt;/div&gt;
     &lt;/fieldset&gt;
 &lt;/form&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>

<p>We will also add a stylesheet with some basic styles for the form.</p>

<p>Save the following as styles.css</p>

<pre><code class="css">fieldset {
    margin:0 auto;
    width: 235px;
}
legend {
    font-weight:bold;
    font-size:125%;
}
form div.row {
    margin-bottom: 8px;
}
label {
    display: block;
    font-weight:bold;
}
input[type=text],input[type=email] {
    display:block;
    width: 400px;
}

textarea {
    width: 400px;
    height:200px;
}
</code></pre>

<p>If you view the page in a browser it should look something like this.</p>

<p><img src="/images/contact-form/part-1/contact-form.png" alt="Contact Form" /></p>

<p>Not the prettiest form but this isn't a design tutorial.
Feel free to add your own styles.</p>

<p>We also will need a page to send the user to after they submit the form.
This should have some sort of "Thank you for submitting" message on it.</p>

<p>Save the following as thankyou.html</p>

<pre><code class="html">&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;meta charset="utf-8"&gt;
    &lt;meta http-equiv="X-UA-Compatible" content="IE=edge"&gt;
    &lt;title&gt;Contact Us&lt;/title&gt;
    &lt;link rel="stylesheet" href="styles.css"&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;p&gt;Thank you for your message.&lt;/p&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>

<h2 id="sending-an-email-on-form-post.">Sending an email on form post.</h2>

<p>We have a form but it doesn't do anything when the user submits it.</p>

<p>Add the following to the top of the contact.php page above the <code>&lt;!DOCTYPE html&gt;</code> line.</p>

<pre><code class="php">&lt;?php

// Check if the form has been posted
if (isset($_POST['name'], $_POST['email'], $_POST['message'])) {
    // The email address the email will be sent to
    $to = "business@example.com";
    // The email subject
    $subject = "Contact Form Submission";
    // Set the from and reply-to address for the email
    $headers = "From: website@example.com\r\n"
             . "X-Mailer: PHP/" . phpversion();
    // Build the body of the email
    $mailbody = "The contact form has been filled out.\n\n"
              . "Name: " . $_POST['name'] . "\n"
              . "Email: " . $_POST['email'] . "\n"
              . "Message:\n" . $_POST['message'];
    // Send the email
    mail($to, $subject, $mailbody, $headers);
    // Go to the thank you page
    header("location: thankyou.html");
    exit;

}

?&gt;
</code></pre>

<p>The entire page should not look like this.</p>

<pre><code class="php">&lt;?php

// Check if the form has been posted
if (isset($_POST['name'], $_POST['email'], $_POST['message'])) {
    // The email address the email will be sent to
    $to = "business@example.com";
    // The email subject
    $subject = "Contact Form Submission";
    // Set the from and reply-to address for the email
    $headers = "From: website@example.com\r\n"
             . "X-Mailer: PHP/" . phpversion();
    // Build the body of the email
    $mailbody = "The contact form has been filled out.\n\n"
              . "Name: " . $_POST['name'] . "\n"
              . "Email: " . $_POST['email'] . "\n"
              . "Message:\n" . $_POST['message'];
    // Send the email
    mail($to, $subject, $mailbody, $headers);
    // Go to the thank you page
    header("location: thankyou.html");
    exit;

}

?&gt;
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;meta charset="utf-8"&gt;
    &lt;meta http-equiv="X-UA-Compatible" content="IE=edge"&gt;
    &lt;title&gt;Contact Us&lt;/title&gt;
    &lt;link rel="stylesheet" href="styles.css"&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;form action="contact.php" method="post" accept-charset="utf-8"&gt;
     &lt;fieldset&gt;
         &lt;legend&gt;Contact Us&lt;/legend&gt;
         &lt;div class="row"&gt;
             &lt;label for="name"&gt;Name: &lt;/label&gt;
             &lt;input id="name" type="text" name="name" value=""&gt;
         &lt;/div&gt;
         &lt;div class="row"&gt;
             &lt;label for="email"&gt;Email Address: &lt;/label&gt;
             &lt;input id="email" type="text" name="email" value=""&gt;
         &lt;/div&gt;
         &lt;div class="row"&gt;
             &lt;label for="message"&gt;Message:&lt;/label&gt;
             &lt;textarea id="message" name="message"&gt;&lt;/textarea&gt;
         &lt;/div&gt;
         &lt;div class="row"&gt;
             &lt;input type="submit" value="Submit"&gt;
         &lt;/div&gt;
     &lt;/fieldset&gt;
 &lt;/form&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>

<h3 id="how-does-it-work%3F">How does it work?</h3>

<p>First we are checking if each of the form fields have been posted.
If they exist the user has submitted the form.</p>

<pre><code class="php">if (isset($_POST['name'], $_POST['email'], $_POST['message'])) {
</code></pre>

<p>Next we define where we would like the email to be sent and what the subject of the email should be.
Change the <code>$to</code> variable to your own email address.</p>

<pre><code class="php">// The email address the email will be sent to
$to = "business@example.com";
// The email subject
$subject = "Contact Form Submission";
</code></pre>

<p>The headers set the email address used for the from in the email.
The other line indicates the application used to send the email.  In this case php.</p>

<pre><code class="php">// Set the from and reply-to address for the email
$headers = "From: website@example.com\r\n"
         . "X-Mailer: PHP/" . phpversion();
</code></pre>

<p>We now need to build the body of the email itself.
It should include each of the posted values.</p>

<pre><code class="php">// Build the body of the email
$mailbody = "The contact form has been filled out.\n\n"
          . "Name: " . $_POST['name'] . "\n"
          . "Email: " . $_POST['email'] . "\n"
          . "Message:\n" . $_POST['message'];
</code></pre>

<p>Next we use the <a href="http://us3.php.net/manual/en/book.mail.php">php mail</a> function to actually send the email.</p>

<pre><code class="php">// Send the email
mail($to, $subject, $mailbody, $headers);
</code></pre>

<p>Finally we send the user to the thankyou.html page that we created.</p>

<pre><code class="php">// Go to the thank you page
header("location: thankyou.html");
exit;
</code></pre>

<h2 id="improving-the-script">Improving the script</h2>

<p>While this script would work as is for your contact form it have a number of problems with it.</p>

<p>The biggest one is that there is no form validation.
A user can submit a blank form and it will send the email and redirect to the thankyou.html page anyway.</p>

<p>The data the user is submitting is not being escaped or filtered.
We only want plain text being submitted through the form but without any enforcement of that the user can submit anything including scripts that might cause security issues with certain email clients.</p>

<p>There is nothing to help prevent spam.
Once a spam-bot finds this script you could find your inbox full of worthless junk.</p>

<p>In the next part I will tackle some of these issues.</p>

        </div>
        <footer class="post__footer">
            <ul class="past__meta">
                <li class="post__byline">Posted by <span class="post__author p-author h-card" itemprop="author">Jonathan Bernardi</span></li>
                <li>
                    <time class="post__date--footer dt-published" itemprop="datePublished" content="2014-09-01T00:00:00-07:00"
                          datetime="2014-09-01T00:00:00-07:00">Sep 1st, 2014</time>
                </li>
                                    <li>
                        <span class="post__tags p-category">
                                                    <a class="post__tag"
                               href="/tag/mail/">mail</a>,                                                     <a class="post__tag"
                               href="/tag/php/">php</a>                                                </span>
                    </li>
                            </ul>
            <meta class="u-url" itemprop="url" content="https://www.thedevfiles.com/2014/09/building-a-simple-contact-form-in-php-part-1/">
                            <meta itemprop="keywords" content="mail, php">
                                        <meta class="p-summary" itemprop="description" content="Building a simple contact form in PHP">
                    </footer>

                    <div class="sharing">
            <a href="//twitter.com/share" class="twitter-share-button" data-url="https://www.thedevfiles.com/2014/09/building-a-simple-contact-form-in-php-part-1/" data-via="thejonbernardi" data-counturl="https://www.thedevfiles.com/2014/09/building-a-simple-contact-form-in-php-part-1/" >Tweet</a>
                <div class="g-plusone" data-size="medium"></div>
        </div>
        
                    <nav class="pagination pagination--simple">
                <ul>
                                            <li class="pagination--simple__previous">
                            <a href="/2014/08/secure-password-hashing/">&laquo; Secure Password Hashing with PHP</a>
                        </li>
                                                                <li class="pagination--simple__next">
                            <a href="/2014/09/building-a-simple-contact-form-in-php-part-2/">Building a simple contact form in PHP - Part 2 &raquo;</a>
                        </li>
                                    </ul>
            </nav>
        
                    <section class="post__comments">
    <h2>Comments</h2>
    <div id="disqus_thread" aria-live="polite">
        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    </div>
</section>
        
    </article>



    </section>
    <section class="sidebar">
    <aside class="widget widget--about h-card">
    <h4 class="widget__title p-name">Jonathan Bernardi</h4>

    <div class="widget__body">
        <div class="widget--about__gravatar">
            <img class="u-photo" src="//www.gravatar.com/avatar/7a5252ed2b4a12954535820e06fd0faa" alt="Jonathan Bernardi">
        </div>
        <div class="widget--about__social">
                            <a target="_blank" href="https://twitter.com/thejonbernardi" title="Twitter"><i class="fa fa-twitter"></i></a>
                                                    <a target="_blank" href="https://plus.google.com/116642652326925126482" title="Google+"><i class="fa fa-google-plus"></i></a>
                                                    <a target="_blank" href="http://www.linkedin.com/pub/jonathan-bernardi/57/318/99a" title="LinkedIn"><i class="fa fa-linkedin"></i></a>
                                        <a target="_blank" href="https://github.com/spekkionu" title="Github"><i class="fa fa-github"></i></a>
                                </div>
    </div>
</aside>
    <aside class="widget widget--monthly">
    <h4 class="widget__title">Monthly Arhives</h4>

    <div class="widget__body">
        <ul class="widget--monthly__list">
                        <li>
                <a class="widget--monthly__year " href="/2014/">2014 (9)</a>

                                    <ul class="widget--monthly__months">
                                            <li>
                            <a class="widget--monthly__month " href="/2014/09/">
                                Sep
                                (6)
                            </a>
                        </li>
                                            <li>
                            <a class="widget--monthly__month " href="/2014/08/">
                                Aug
                                (3)
                            </a>
                        </li>
                                        </ul>
                            </li>
                    </ul>
    </div>
</aside>



    <aside class="widget widget--tags">
    <h4 class="widget__title">Tags</h4>

    <div class="widget__body">
                    <span class="tag size2"><a href="/tag/pdo/">pdo</a></span>
            &nbsp;
                    <span class="tag size9"><a href="/tag/php/">php</a></span>
            &nbsp;
                    <span class="tag size6"><a href="/tag/mail/">mail</a></span>
            &nbsp;
                    <span class="tag size3"><a href="/tag/database/">database</a></span>
            &nbsp;
                    <span class="tag size2"><a href="/tag/mysql/">mysql</a></span>
            &nbsp;
                    <span class="tag size2"><a href="/tag/security/">security</a></span>
            &nbsp;
                    <span class="tag size2"><a href="/tag/doctrine/">doctrine</a></span>
            &nbsp;
            </div>
</aside>



</section>
</div>
<footer class="sitefooter">
    <div class="content-wrapper">
        Copyright &copy; 2015 - Jonathan Bernardi
    </div>
</footer>



<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.9.1/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>


            <script type="text/javascript">
    var disqus_shortname = 'thedevfiles';
    var disqus_developer = 1;
    var disqus_identifier = 'https://www.thedevfiles.com/2014/09/building-a-simple-contact-form-in-php-part-1/';
    var disqus_title = 'Building a simple contact form in PHP - Part 1';
    var disqus_url = 'https://www.thedevfiles.com/2014/09/building-a-simple-contact-form-in-php-part-1/';
    var disqus_script = 'embed.js';
    function disqus_config() {
        this.callbacks.onNewComment = [function (comment) {
            ga('send', 'event', 'comment', 'post', 'Post a Comment');
        }];
    }
    (function () {
        var dsq = document.createElement('script');
        dsq.type = 'text/javascript';
        dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>
    
                        <script type="text/javascript">
        (function() {
            var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
            script.src = 'https://apis.google.com/js/plusone.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
        })();
    </script>
            <script type="text/javascript">
        (function(){
            var twitterWidgets = document.createElement('script');
            twitterWidgets.type = 'text/javascript';
            twitterWidgets.async = true;
            twitterWidgets.src = '//platform.twitter.com/widgets.js';
            document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
        })();
    </script>
        <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-35809975-1', 'auto');
        ga('require', 'displayfeatures');
        ga('send', 'pageview');

    </script>
</body>
</html>
